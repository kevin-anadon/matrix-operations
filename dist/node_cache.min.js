/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/node-cache@5.1.2/lib/node_cache.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
(function(){var t,s,i=[].splice,e=function(t,s){if(!(t instanceof s))throw new Error("Bound instance method accessed before binding")},h=[].indexOf;s=require("clone"),t=require("events").EventEmitter,module.exports=function(){class r extends t{constructor(t={}){super(),this.get=this.get.bind(this),this.mget=this.mget.bind(this),this.set=this.set.bind(this),this.mset=this.mset.bind(this),this.del=this.del.bind(this),this.take=this.take.bind(this),this.ttl=this.ttl.bind(this),this.getTtl=this.getTtl.bind(this),this.keys=this.keys.bind(this),this.has=this.has.bind(this),this.getStats=this.getStats.bind(this),this.flushAll=this.flushAll.bind(this),this.flushStats=this.flushStats.bind(this),this.close=this.close.bind(this),this._checkData=this._checkData.bind(this),this._check=this._check.bind(this),this._isInvalidKey=this._isInvalidKey.bind(this),this._wrap=this._wrap.bind(this),this._getValLength=this._getValLength.bind(this),this._error=this._error.bind(this),this._initErrors=this._initErrors.bind(this),this.options=t,this._initErrors(),this.data={},this.options=Object.assign({forceString:!1,objectValueSize:80,promiseValueSize:80,arrayValueSize:40,stdTTL:0,checkperiod:600,useClones:!0,deleteOnExpire:!0,enableLegacyCallbacks:!1,maxKeys:-1},this.options),this.options.enableLegacyCallbacks&&(console.warn("WARNING! node-cache legacy callback support will drop in v6.x"),["get","mget","set","del","ttl","getTtl","keys","has"].forEach((t=>{var s;s=this[t],this[t]=function(...t){var e,h;if(h=t,[...t]=h,[e]=i.call(t,-1),"function"!=typeof e)return s(...t,e);try{e(null,s(...t))}catch(t){e(t)}}}))),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.validKeyTypes=["string","number"],this._checkData()}get(t){var s;if(e(this,r),null!=(s=this._isInvalidKey(t)))throw s;return null!=this.data[t]&&this._check(t,this.data[t])?(this.stats.hits++,this._unwrap(this.data[t])):void this.stats.misses++}mget(t){var s,i,h,a,n;if(e(this,r),!Array.isArray(t))throw this._error("EKEYSTYPE");for(n={},i=0,a=t.length;i<a;i++){if(h=t[i],null!=(s=this._isInvalidKey(h)))throw s;null!=this.data[h]&&this._check(h,this.data[h])?(this.stats.hits++,n[h]=this._unwrap(this.data[h])):this.stats.misses++}return n}set(t,s,i){var h,a;if(e(this,r),this.options.maxKeys>-1&&this.stats.keys>=this.options.maxKeys)throw this._error("ECACHEFULL");if(this.options.forceString,null==i&&(i=this.options.stdTTL),null!=(h=this._isInvalidKey(t)))throw h;return a=!1,this.data[t]&&(a=!0,this.stats.vsize-=this._getValLength(this._unwrap(this.data[t],!1))),this.data[t]=this._wrap(s,i),this.stats.vsize+=this._getValLength(s),a||(this.stats.ksize+=this._getKeyLength(t),this.stats.keys++),this.emit("set",t,s),!0}mset(t){var s,i,h,a,n,l,o,u,d;if(e(this,r),this.options.maxKeys>-1&&this.stats.keys+t.length>=this.options.maxKeys)throw this._error("ECACHEFULL");for(i=0,l=t.length;i<l;i++){if(n=t[i],({key:a,val:d,ttl:u}=n),u&&"number"!=typeof u)throw this._error("ETTLTYPE");if(null!=(s=this._isInvalidKey(a)))throw s}for(h=0,o=t.length;h<o;h++)n=t[h],({key:a,val:d,ttl:u}=n),this.set(a,d,u);return!0}del(t){var s,i,h,a,n,l;for(e(this,r),Array.isArray(t)||(t=[t]),s=0,h=0,n=t.length;h<n;h++){if(a=t[h],null!=(i=this._isInvalidKey(a)))throw i;null!=this.data[a]&&(this.stats.vsize-=this._getValLength(this._unwrap(this.data[a],!1)),this.stats.ksize-=this._getKeyLength(a),this.stats.keys--,s++,l=this.data[a],delete this.data[a],this.emit("del",a,l.v))}return s}take(t){var s;return e(this,r),null!=(s=this.get(t))&&this.del(t),s}ttl(t,s){var i;if(e(this,r),s||(s=this.options.stdTTL),!t)return!1;if(null!=(i=this._isInvalidKey(t)))throw i;return!(null==this.data[t]||!this._check(t,this.data[t]))&&(s>=0?this.data[t]=this._wrap(this.data[t].v,s,!1):this.del(t),!0)}getTtl(t){var s;if(e(this,r),t){if(null!=(s=this._isInvalidKey(t)))throw s;return null!=this.data[t]&&this._check(t,this.data[t])?this.data[t].t:void 0}}keys(){return e(this,r),Object.keys(this.data)}has(t){return e(this,r),null!=this.data[t]&&this._check(t,this.data[t])}getStats(){return e(this,r),this.stats}flushAll(t=!0){e(this,r),this.data={},this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this._killCheckPeriod(),this._checkData(t),this.emit("flush")}flushStats(){e(this,r),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.emit("flush_stats")}close(){e(this,r),this._killCheckPeriod()}_checkData(t=!0){var s,i,h;for(s in e(this,r),i=this.data)h=i[s],this._check(s,h);t&&this.options.checkperiod>0&&(this.checkTimeout=setTimeout(this._checkData,1e3*this.options.checkperiod,t),null!=this.checkTimeout&&null!=this.checkTimeout.unref&&this.checkTimeout.unref())}_killCheckPeriod(){if(null!=this.checkTimeout)return clearTimeout(this.checkTimeout)}_check(t,s){var i;return e(this,r),i=!0,0!==s.t&&s.t<Date.now()&&(this.options.deleteOnExpire&&(i=!1,this.del(t)),this.emit("expired",t,this._unwrap(s))),i}_isInvalidKey(t){var s;if(e(this,r),s=typeof t,h.call(this.validKeyTypes,s)<0)return this._error("EKEYTYPE",{type:typeof t})}_wrap(t,i,h=!0){var a;return e(this,r),this.options.useClones||(h=!1),a=Date.now(),0,1e3,{t:0===i?0:i?a+1e3*i:0===this.options.stdTTL?this.options.stdTTL:a+1e3*this.options.stdTTL,v:h?s(t):t}}_unwrap(t,i=!0){return this.options.useClones||(i=!1),null!=t.v?i?s(t.v):t.v:null}_getKeyLength(t){return t.toString().length}_getValLength(t){return e(this,r),"string"==typeof t?t.length:this.options.forceString?JSON.stringify(t).length:Array.isArray(t)?this.options.arrayValueSize*t.length:"number"==typeof t?8:"function"==typeof(null!=t?t.then:void 0)?this.options.promiseValueSize:("undefined"!=typeof Buffer&&null!==Buffer?Buffer.isBuffer(t):void 0)?t.length:null!=t&&"object"==typeof t?this.options.objectValueSize*Object.keys(t).length:"boolean"==typeof t?8:0}_error(t,s={}){var i;return e(this,r),(i=new Error).name=t,i.errorcode=t,i.message=null!=this.ERRORS[t]?this.ERRORS[t](s):"-",i.data=s,i}_initErrors(){var t,s,i;for(s in e(this,r),this.ERRORS={},i=this._ERRORS)t=i[s],this.ERRORS[s]=this.createErrorMessage(t)}createErrorMessage(t){return function(s){return t.replace("__key",s.type)}}}return r.prototype._ERRORS={ENOTFOUND:"Key `__key` not found",ECACHEFULL:"Cache max keys amount exceeded",EKEYTYPE:"The key argument has to be of type `string` or `number`. Found: `__key`",EKEYSTYPE:"The keys argument has to be an array.",ETTLTYPE:"The ttl argument has to be a number."},r}.call(this)}).call(this);
//# sourceMappingURL=/sm/287247362c07a736a23486086ebc20bd24d88e05f696b7dedcba595e830cef68.map